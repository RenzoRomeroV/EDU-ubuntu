<div class="dashboard-container">
  <!-- Botón de menú móvil -->
  <button class="mobile-menu-toggle" (click)="toggleSidebar()" *ngIf="isMobile" 
          title="Abrir menú de navegación" aria-label="Abrir menú de navegación">
    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
      <path d="M3 12H21M3 6H21M3 18H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </button>

  <!-- Overlay para móvil -->
  <div class="mobile-overlay" (click)="closeSidebar()" [class.active]="sidebarCollapsed && isMobile"></div>

  <!-- Sidebar de navegación -->
  <nav class="sidebar" [class.collapsed]="sidebarCollapsed" [class.mobile-open]="sidebarCollapsed && isMobile">
    <div class="sidebar-header">
      <div class="ubuntu-logo">
        <img src="assets/img/logo2.0.jpg" alt="Ubuntu Education Logo" class="logo-image">
        <!--<h2 class="sidebar-title" *ngIf="!sidebarCollapsed">Ubuntu Education</h2>-->
      </div>
    </div>

    <!-- Botón para contraer/expandir debajo del logo -->
    <div class="collapse-button-container">
      <!-- 
        El error en la línea 19 ("Buttons must have discernible text: Element has no title attribute") es una advertencia común de accesibilidad.
        Para solucionarlo, agrega un atributo title o un texto alternativo para que los lectores de pantalla puedan identificar el propósito del botón.
      -->
      <button class="collapse-button" (click)="toggleSidebar()" title="Contraer o expandir menú lateral" aria-label="Contraer o expandir menú lateral">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path d="M3 12H21M3 6H21M3 18H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>

    <ul class="menu-list">
      <li class="menu-item active" (click)="selectModule('inicio')" [title]="sidebarCollapsed ? 'Inicio' : ''">
        <div class="menu-icon">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M9 22V12H15V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <span class="menu-text">Inicio</span>
      </li>

      <li class="menu-item curso-item" [class.dropdown-open]="cursoDropdownOpen" [title]="sidebarCollapsed ? 'Curso' : ''">
        <div class="menu-item-content" (click)="toggleCursoDropdown()">
          <div class="menu-icon">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <span class="menu-text">Curso</span>
          <div class="submenu-arrow" [class.rotated]="cursoDropdownOpen">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </div>
      </li>
      
      <!-- Submódulos que se despliegan/contraen -->
      <li class="submenu-item-container" *ngIf="cursoDropdownOpen">
        <div class="submenu-item-red" [routerLink]="['/dashboard','curso','primaria']" (click)="selectCursoSubmodule('primaria')">
          <span class="submenu-text-red">Primaria</span>
        </div>
      </li>
      
      <li class="submenu-item-container" *ngIf="cursoDropdownOpen">
        <div class="submenu-item-red" [routerLink]="['/dashboard','curso','secundaria']" (click)="selectCursoSubmodule('secundaria')">
          <span class="submenu-text-red">Secundaria</span>
        </div>
      </li>

      <li class="menu-item" (click)="selectModule('recursos')" [title]="sidebarCollapsed ? 'Recursos' : ''">
        <div class="menu-icon">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9 11H15M9 15H15M17 21H7C5.89543 21 5 20.1046 5 19V5C5 3.89543 5.89543 3 7 3H12.5858C12.851 3 13.1054 3.10536 13.2929 3.29289L19.7071 9.70711C19.8946 9.89464 20 10.149 20 10.4142V19C20 20.1046 19.1046 21 18 21H17ZM17 21V10H13V5H7V19H17Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <span class="menu-text">Recursos</span>
      </li>

      <li class="menu-item" (click)="selectModule('juegos')" [title]="sidebarCollapsed ? 'Juegos' : ''">
        <div class="menu-icon">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2L15.09 8.26L22 9L17 14L18.18 21L12 17.77L5.82 21L7 14L2 9L8.91 8.26L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <span class="menu-text">Juegos</span>
      </li>

      <li class="menu-item" (click)="selectModule('contacto')" [title]="sidebarCollapsed ? 'Contacto' : ''">
        <div class="menu-icon">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M21 11.5C21.0034 12.8199 20.6951 14.1219 20.1 15.3C19.3944 16.7118 18.3098 17.8992 16.9674 18.7293C15.6251 19.5594 14.0782 19.9994 12.5 20C11.1801 20.0035 9.87812 19.6951 8.7 19.1L3 21L4.9 15.3C4.30493 14.1219 3.99656 12.8199 4 11.5C4.00061 9.92179 4.44061 8.37488 5.27072 7.03258C6.10083 5.69028 7.28825 4.60564 8.7 3.90003C9.87812 3.30496 11.1801 2.99659 12.5 3.00003H13C15.0843 3.11502 17.053 3.99479 18.5291 5.47089C20.0052 6.94699 20.885 8.91568 21 11V11.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <span class="menu-text">Contacto</span>
      </li>
    </ul>

    <!-- Botón Volver al final del menú -->
    <div class="sidebar-footer">
      <button class="back-button" (click)="goBack()">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M19 12H5M12 19L5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>Volver</span>
      </button>
    </div>
  </nav>

  <!-- Área principal de contenido -->
  <main class="main-content">
    <div class="content-header">
      <h1 class="page-title">{{ currentModule.title }}</h1>
      <p class="page-subtitle">{{ currentModule.subtitle }}</p>
    </div>

    <div class="content-area">
      <!-- Vista de Inicio -->
      <app-inicio *ngIf="currentModule.id === 'inicio'"></app-inicio>

      <!-- Vista de Curso -->
      <app-curso *ngIf="currentModule.id === 'curso'" [selectedNivel]="selectedNivel" [selectedCourse]="selectedCourse"></app-curso>

      <!-- Vista de Recursos -->
      <app-recursos *ngIf="currentModule.id === 'recursos'"></app-recursos>

      <!-- Vista de Juegos -->
      <app-juegos *ngIf="currentModule.id === 'juegos'"></app-juegos>

      <!-- Vista de Contacto -->
      <app-contacto *ngIf="currentModule.id === 'contacto'"></app-contacto>
    </div>
  </main>
</div>
